
<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OCTA NETWORK - منصة مراقبة الشبكات الذكية العالمية</title>
    <meta name="description" content="أقوى منصة عالمية لمراقبة الشبكات والأمن السيبراني مع الذكاء الاصطناعي والتكيف التلقائي" />
    
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E🌐%3C/text%3E%3C/svg%3E" />
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Tajawal:wght@200;300;400;500;700;800;900&display=swap" rel="stylesheet">
    
    <script>
      // Universal Domain Detection & Configuration
      (function() {
        const UniversalDomainManager = {
          init() {
            console.log('🚀 OCTA NETWORK - تهيئة ذكية شاملة');
            
            const hostname = window.location.hostname;
            const pathname = window.location.pathname;
            
            // Universal domain detection
            const domainTypes = {
              githubPages: hostname.includes('github.io'),
              netlify: hostname.includes('netlify.app') || hostname.includes('netlify.com'),
              vercel: hostname.includes('vercel.app') || hostname.includes('vercel.com'),
              surge: hostname.includes('surge.sh'),
              firebase: hostname.includes('firebase.app') || hostname.includes('firebaseapp.com'),
              heroku: hostname.includes('herokuapp.com'),
              custom: !hostname.includes('localhost') && !hostname.includes('127.0.0.1') && !hostname.includes('192.168.'),
              local: hostname.includes('localhost') || hostname.includes('127.0.0.1') || hostname.includes('192.168.') || hostname === '0.0.0.0'
            };
            
            let basePath = '/';
            let repoName = '';
            
            // Smart path detection for GitHub Pages
            if (domainTypes.githubPages) {
              const pathSegments = pathname.split('/').filter(Boolean);
              if (pathSegments.length > 0) {
                repoName = pathSegments[0];
                basePath = `/${repoName}/`;
                console.log('🎯 GitHub Pages - Repository:', repoName);
              }
            }
            
            // Global configuration
            window.__OCTA_CONFIG__ = {
              domainType: Object.keys(domainTypes).find(key => domainTypes[key]) || 'custom',
              basePath,
              repoName,
              hostname,
              isProduction: !domainTypes.local,
              features: {
                universalCompatibility: true,
                smartRouting: true,
                adaptiveLoading: true,
                errorRecovery: true
              }
            };
            
            console.log('⚙️ OCTA Config:', window.__OCTA_CONFIG__);
            return window.__OCTA_CONFIG__;
          },
          
          handleErrors() {
            window.addEventListener('error', (event) => {
              console.error('🚨 خطأ عام:', event.error);
              this.attemptRecovery(event);
            });

            window.addEventListener('unhandledrejection', (event) => {
              console.error('🚨 Promise مرفوض:', event.reason);
              event.preventDefault();
            });
          },
          
          attemptRecovery(event) {
            if (event.filename && event.filename.includes('main.tsx')) {
              console.log('🔄 محاولة استرداد النظام...');
              const config = window.__OCTA_CONFIG__;
              
              setTimeout(() => {
                const script = document.createElement('script');
                script.type = 'module';
                script.src = config && config.basePath !== '/' ? `${config.basePath}src/main.tsx` : './src/main.tsx';
                script.onerror = () => this.showEmergencyInterface();
                document.head.appendChild(script);
              }, 1000);
            }
          },
          
          showEmergencyInterface() {
            document.getElementById('root').innerHTML = `
              <div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); font-family: 'Tajawal', sans-serif; direction: rtl;">
                <div style="text-align: center; background: white; padding: 40px; border-radius: 20px; box-shadow: 0 30px 60px rgba(0,0,0,0.2); max-width: 500px; margin: 20px;">
                  <div style="font-size: 80px; margin-bottom: 20px;">🌐</div>
                  <h1 style="color: #667eea; margin-bottom: 15px; font-size: 2.5rem; font-weight: 800;">OCTA NETWORK</h1>
                  <p style="color: #6b7280; margin-bottom: 25px; line-height: 1.6;">النظام يعمل في الوضع الآمن</p>
                  <button onclick="window.location.reload()" 
                          style="padding: 12px 24px; background: #667eea; color: white; border: none; border-radius: 25px; cursor: pointer; font-size: 16px; font-weight: bold;">
                    🔄 إعادة المحاولة
                  </button>
                </div>
              </div>
            `;
          }
        };
        
        // Initialize
        UniversalDomainManager.init();
        UniversalDomainManager.handleErrors();
      })();
    </script>
    
    <style>
      .loading-screen {
        position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 9999;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex; align-items: center; justify-content: center;
        font-family: 'Tajawal', sans-serif; direction: rtl;
      }
      
      .loading-content {
        text-align: center; color: white;
      }
      
      .loading-logo {
        font-size: 80px; margin-bottom: 20px;
        animation: pulse 2s infinite;
      }
      
      @keyframes pulse {
        0%, 100% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.05); opacity: 0.8; }
      }
      
      @keyframes loading {
        0% { transform: translateX(-100%); }
        50% { transform: translateX(0%); }
        100% { transform: translateX(100%); }
      }
    </style>
  </head>
  <body>
    <div id="loading" class="loading-screen">
      <div class="loading-content">
        <div class="loading-logo">🌐</div>
        <h1 style="font-size: 2.5rem; margin-bottom: 10px; font-weight: 800;">OCTA NETWORK</h1>
        <p style="font-size: 1.2rem; opacity: 0.9; margin-bottom: 30px;">منصة عالمية متوافقة مع جميع الخوادم</p>
        <div style="width: 300px; height: 4px; background: rgba(255,255,255,0.3); border-radius: 2px; overflow: hidden;">
          <div style="width: 100%; height: 100%; background: white; border-radius: 2px; animation: loading 2s ease-in-out infinite;"></div>
        </div>
      </div>
    </div>
    
    <div id="root"></div>
    
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="./src/main.tsx"></script>
    
    <script>
      window.addEventListener('load', () => {
        const loadingEl = document.getElementById('loading');
        if (loadingEl) {
          setTimeout(() => {
            loadingEl.style.opacity = '0';
            loadingEl.style.transition = 'opacity 0.5s ease';
            setTimeout(() => loadingEl.remove(), 500);
          }, 1000);
        }
        console.log('📊 تم تحميل النظام العالمي بنجاح');
      });
    </script>
  </body>
</html>

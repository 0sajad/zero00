
<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OCTA NETWORK - منصة مراقبة الشبكات الذكية العالمية</title>
    <meta name="description" content="أقوى منصة عالمية لمراقبة الشبكات والأمن السيبراني مع الذكاء الاصطناعي والتكيف التلقائي" />
    
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E🌐%3C/text%3E%3C/svg%3E" />
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Tajawal:wght@200;300;400;500;700;800;900&display=swap" rel="stylesheet">
    
    <script>
      // Universal Smart Domain Detection & Configuration
      (function() {
        const SmartDomainManager = {
          init() {
            console.log('🚀 OCTA NETWORK - تهيئة ذكية للمجال');
            
            const hostname = window.location.hostname;
            const pathname = window.location.pathname;
            const search = window.location.search;
            const hash = window.location.hash;
            
            // Smart domain detection
            const domainTypes = {
              githubPages: hostname.includes('github.io') || hostname.includes('github.com'),
              netlify: hostname.includes('netlify.app') || hostname.includes('netlify.com'),
              vercel: hostname.includes('vercel.app') || hostname.includes('vercel.com'),
              custom: !hostname.includes('localhost') && !hostname.includes('127.0.0.1'),
              local: hostname.includes('localhost') || hostname.includes('127.0.0.1')
            };
            
            let basePath = '/';
            let repoName = '';
            
            if (domainTypes.githubPages) {
              const pathSegments = pathname.split('/').filter(Boolean);
              if (pathSegments.length > 0) {
                repoName = pathSegments[0];
                basePath = `/${repoName}/`;
              }
              console.log('🎯 GitHub Pages detected - Repository:', repoName);
            }
            
            // Set global configuration
            window.__OCTA_CONFIG__ = {
              domainType: Object.keys(domainTypes).find(key => domainTypes[key]) || 'custom',
              basePath,
              repoName,
              hostname,
              isProduction: !domainTypes.local,
              features: {
                smartRouting: true,
                adaptiveLoading: true,
                errorRecovery: true,
                universalCompatibility: true
              }
            };
            
            console.log('⚙️ تكوين OCTA:', window.__OCTA_CONFIG__);
            return window.__OCTA_CONFIG__;
          },
          
          handleErrors() {
            window.addEventListener('error', (event) => {
              console.error('🚨 خطأ عام:', event.error);
              this.showSmartError('حدث خطأ في النظام', event.error?.message);
            });

            window.addEventListener('unhandledrejection', (event) => {
              console.error('🚨 Promise مرفوض:', event.reason);
              this.showSmartError('خطأ في العملية', event.reason);
            });
          },
          
          showSmartError(title, message) {
            const errorDiv = document.createElement('div');
            errorDiv.style.cssText = `
              position: fixed; top: 20px; right: 20px; z-index: 10000;
              background: linear-gradient(135deg, #ef4444, #dc2626);
              color: white; padding: 15px 20px; border-radius: 10px;
              box-shadow: 0 10px 30px rgba(239, 68, 68, 0.3);
              font-family: 'Tajawal', sans-serif; direction: rtl;
              max-width: 400px; animation: slideIn 0.3s ease-out;
            `;
            errorDiv.innerHTML = `
              <div style="font-weight: bold; margin-bottom: 5px;">${title}</div>
              <div style="font-size: 12px; opacity: 0.9;">${message}</div>
            `;
            
            document.body.appendChild(errorDiv);
            setTimeout(() => errorDiv.remove(), 5000);
          }
        };
        
        // Initialize smart domain management
        SmartDomainManager.init();
        SmartDomainManager.handleErrors();
        
      })();
    </script>
    
    <style>
      @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
      }
      
      @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
      }
      
      .loading-screen {
        position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 9999;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex; align-items: center; justify-content: center;
        font-family: 'Tajawal', sans-serif; direction: rtl;
      }
      
      .loading-content {
        text-align: center; color: white;
        animation: pulse 2s infinite;
      }
      
      .loading-logo {
        font-size: 80px; margin-bottom: 20px;
        animation: pulse 2s infinite;
      }
    </style>
  </head>
  <body>
    <div id="loading" class="loading-screen">
      <div class="loading-content">
        <div class="loading-logo">🌐</div>
        <h1 style="font-size: 2.5rem; margin-bottom: 10px; font-weight: 800;">OCTA NETWORK</h1>
        <p style="font-size: 1.2rem; opacity: 0.9; margin-bottom: 30px;">منصة مراقبة الشبكات الذكية العالمية</p>
        <div style="width: 300px; height: 4px; background: rgba(255,255,255,0.3); border-radius: 2px; overflow: hidden;">
          <div style="width: 100%; height: 100%; background: white; border-radius: 2px; animation: loading 2s ease-in-out infinite;"></div>
        </div>
      </div>
    </div>
    
    <div id="root"></div>
    
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    
    <script type="module">
      // Advanced Smart Loading System
      const SmartLoader = {
        async init() {
          try {
            console.log('🔄 بدء نظام التحميل الذكي...');
            
            const config = window.__OCTA_CONFIG__;
            const loadingEl = document.getElementById('loading');
            
            // Multiple loading strategies
            const strategies = [
              () => this.loadViaES6Import(),
              () => this.loadViaScript(),
              () => this.loadFallback()
            ];
            
            for (const strategy of strategies) {
              try {
                await strategy();
                break;
              } catch (error) {
                console.warn('⚠️ استراتيجية فشلت، محاولة التالية...', error);
                continue;
              }
            }
            
            // Hide loading screen
            setTimeout(() => {
              if (loadingEl) {
                loadingEl.style.opacity = '0';
                setTimeout(() => loadingEl.remove(), 500);
              }
            }, 1000);
            
          } catch (error) {
            console.error('❌ فشل جميع استراتيجيات التحميل:', error);
            this.showFallbackUI(error);
          }
        },
        
        async loadViaES6Import() {
          console.log('📦 محاولة التحميل عبر ES6 Import...');
          const module = await import('./src/main.tsx');
          console.log('✅ تم التحميل بنجاح عبر ES6!');
          return module;
        },
        
        async loadViaScript() {
          console.log('📄 محاولة التحميل عبر Script Tag...');
          return new Promise((resolve, reject) => {
            const script = document.createElement('script');
            script.type = 'module';
            script.src = './src/main.tsx';
            script.onload = () => {
              console.log('✅ تم التحميل بنجاح عبر Script!');
              resolve();
            };
            script.onerror = (error) => {
              console.error('❌ فشل التحميل عبر Script:', error);
              reject(error);
            };
            document.head.appendChild(script);
          });
        },
        
        loadFallback() {
          console.log('🆘 تفعيل واجهة الطوارئ...');
          const root = document.getElementById('root');
          const loading = document.getElementById('loading');
          
          if (loading) loading.remove();
          
          root.innerHTML = `
            <div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); font-family: 'Tajawal', sans-serif; direction: rtl;">
              <div style="text-align: center; background: white; padding: 40px; border-radius: 20px; box-shadow: 0 30px 60px rgba(0,0,0,0.2); max-width: 600px; margin: 20px;">
                <div style="font-size: 80px; margin-bottom: 20px; animation: pulse 2s infinite;">🌐</div>
                <h1 style="color: #1a202c; margin-bottom: 15px; font-size: 2.5rem; font-weight: 800;">OCTA NETWORK</h1>
                <h2 style="color: #4a5568; margin-bottom: 20px; font-size: 1.5rem;">منصة مراقبة الشبكات الذكية</h2>
                <p style="color: #6b7280; margin-bottom: 30px; line-height: 1.8; font-size: 1.1rem;">
                  أقوى منصة عالمية لمراقبة الشبكات والأمن السيبراني مع تقنيات الذكاء الاصطناعي المتقدمة
                </p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
                  <div style="padding: 20px; background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; border-radius: 15px;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">🛡️</div>
                    <h3 style="font-weight: bold; margin-bottom: 5px;">الأمن السيبراني</h3>
                    <p style="opacity: 0.9; font-size: 0.9rem;">حماية متقدمة ومراقبة مستمرة</p>
                  </div>
                  <div style="padding: 20px; background: linear-gradient(135deg, #10b981, #047857); color: white; border-radius: 15px;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">📊</div>
                    <h3 style="font-weight: bold; margin-bottom: 5px;">تحليلات ذكية</h3>
                    <p style="opacity: 0.9; font-size: 0.9rem;">رؤى عميقة ومعلومات في الوقت الفعلي</p>
                  </div>
                  <div style="padding: 20px; background: linear-gradient(135deg, #f59e0b, #d97706); color: white; border-radius: 15px;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">⚡</div>
                    <h3 style="font-weight: bold; margin-bottom: 5px;">أداء فائق</h3>
                    <p style="opacity: 0.9; font-size: 0.9rem;">سرعة وكفاءة لا مثيل لها</p>
                  </div>
                </div>
                <button onclick="window.location.reload()" 
                        style="padding: 15px 40px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; border-radius: 50px; cursor: pointer; font-size: 1.1rem; font-weight: bold; font-family: 'Tajawal', sans-serif; transition: all 0.3s ease; box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);">
                  🔄 إعادة تحميل المنصة
                </button>
                <div style="margin-top: 30px; padding: 20px; background: #f8fafc; border-radius: 10px; text-align: right;">
                  <h4 style="color: #374151; margin-bottom: 10px; font-weight: bold;">معلومات النظام:</h4>
                  <p style="color: #6b7280; font-size: 0.9rem; margin: 5px 0;">المجال: ${window.location.hostname}</p>
                  <p style="color: #6b7280; font-size: 0.9rem; margin: 5px 0;">المسار: ${window.location.pathname}</p>
                  <p style="color: #6b7280; font-size: 0.9rem; margin: 5px 0;">النوع: ${window.__OCTA_CONFIG__?.domainType || 'غير محدد'}</p>
                </div>
              </div>
            </div>
          `;
        },
        
        showFallbackUI(error) {
          const loading = document.getElementById('loading');
          if (loading) loading.remove();
          
          const root = document.getElementById('root');
          root.innerHTML = this.getFallbackHTML(error);
        },
        
        getFallbackHTML(error) {
          return `
            <div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #ef4444, #dc2626); font-family: 'Tajawal', sans-serif; direction: rtl;">
              <div style="text-align: center; background: white; padding: 40px; border-radius: 20px; box-shadow: 0 30px 60px rgba(0,0,0,0.3); max-width: 500px; margin: 20px;">
                <div style="font-size: 60px; margin-bottom: 20px;">⚠️</div>
                <h1 style="color: #dc2626; margin-bottom: 15px; font-size: 24px;">خطأ في تحميل OCTA NETWORK</h1>
                <p style="color: #6b7280; margin-bottom: 25px; line-height: 1.6;">حدث خطأ في تحميل المنصة. يرجى المحاولة مرة أخرى.</p>
                <button onclick="window.location.reload()" 
                        style="padding: 12px 24px; background: #ef4444; color: white; border: none; border-radius: 25px; cursor: pointer; font-size: 16px; font-weight: bold; transition: all 0.3s ease;">
                  إعادة التحميل
                </button>
                <div style="margin-top: 20px; font-size: 12px; color: #9ca3af; font-family: monospace; text-align: left;">
                  ${error?.message || 'خطأ غير معروف'}
                </div>
              </div>
            </div>
          `;
        }
      };
      
      // Add loading animation styles
      const style = document.createElement('style');
      style.textContent = `
        @keyframes loading {
          0% { transform: translateX(-100%); }
          50% { transform: translateX(0%); }
          100% { transform: translateX(100%); }
        }
      `;
      document.head.appendChild(style);
      
      // Initialize smart loader
      SmartLoader.init();
      
      // Performance monitoring
      window.addEventListener('load', () => {
        const loadTime = Math.round(performance.now());
        console.log(`📊 إحصائيات الأداء:`, {
          loadTime: `${loadTime}ms`,
          domain: window.location.hostname,
          config: window.__OCTA_CONFIG__
        });
        
        // Send performance data
        if (loadTime > 3000) {
          console.warn('⚠️ تحذير: وقت التحميل طويل:', loadTime + 'ms');
        }
      });
    </script>
  </body>
</html>
